<!DOCTYPE html>
<html>
<head>
    <title>Adicionar PDI para {{ estudante.nome }}</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Adicionar PDI para {{ estudante.nome }}</h2>
    <form id="pdi-form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        {{ formset.management_form }}
        <fieldset id="formulario-fieldset">
            <legend>Formulários:</legend>
            {% for form in formset %}
                <div class="formulario">
                    {{ form.as_p }}
                    
                </div>
            {% endfor %}
        </fieldset>
        <button type="button" id="add-formulario">Adicionar Formulário</button>
        <button type="button" id="remove-formulario">Remover Último Formulário</button>
        <button type="submit">Salvar</button>
    </form>

    <!-- Modelo de formulário oculto -->
    <div id="formulario-modelo" style="display: none;">
        <div class="formulario">
            {{ formset.empty_form.as_p }}
        </div>
    </div>

    <script>
        $(document).ready(function() {
            $('#add-formulario').click(function() {
                var newForm = $('#formulario-modelo .formulario').clone();
                $('#formulario-fieldset').append(newForm);
                newForm.show();  
            });

            $('#remove-formulario').click(function() {
                $('#formulario-fieldset .formulario:last').remove();
            });
        });
    </script>
</body>
</html>



